name: EKS
workflows:
  apply-eks:
    stack: dev
    steps:
      - name: "init"
        command: terraform apply init -auto-approve
      - name: "vpc"
        command: terraform apply vpc -auto-approve
      - name: "eks"
        command: terraform apply eks -auto-approve

  plan-eks:
    stack: dev
    steps:
      - name: "init"
        command: terraform apply init -auto-approve
      - name: "vpc"
        command: terraform apply vpc -auto-approve
      #- name: "bastion"
      #command: terraform apply bastion -auto-approve
      - name: "eks"
        command: terraform plan eks

  destroy-eks:
    stack: dev
    steps:
      - name: "init"
        command: terraform apply init -auto-approve
      - name: "eks"
        command: terraform destroy eks -auto-approve
      - name: "vpc"
        command: terraform destroy vpc -auto-approve
  plan-init:
    stack: dev
    steps:
      - name: "init"
        command: terraform plan init
  apply-init:
    stack: dev
    steps:
      - name: "init"
        command: terraform apply init -auto-approve
