name: EKS
workflows:
  plan-bastion:
    stack: dev
    steps:
      - name: "init"
        command: terraform apply init -auto-approve
      - name: "vpc"
        command: terraform plan vpc
      - name: "bastion"
        command: terraform plan bastion

  destroy-bastion:
    stack: dev
    steps:
      - name: "init"
        command: terraform apply init -auto-approve
      - name: "bastion"
        command: terraform destroy bastion -auto-approve
      - name: "vpc"
        command: terraform destroy vpc -auto-approve

  plan-init:
    stack: dev
    steps:
      - name: "init"
        command: terraform plan init

  apply-init:
    stack: dev
    steps:
      - name: "init"
        command: terraform apply init -auto-approve
